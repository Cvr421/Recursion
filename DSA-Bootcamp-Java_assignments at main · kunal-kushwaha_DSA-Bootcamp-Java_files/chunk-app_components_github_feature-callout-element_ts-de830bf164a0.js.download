"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_github_feature-callout-element_ts"],{3447(a,b,c){c.d(b,{D:()=>f,P:()=>e});var d=c(46263);function e(a=0,b={}){return(c,e,f)=>{if(!f||"function"!=typeof f.value)throw Error("debounce can only decorate functions");let g=f.value;f.value=(0,d.P)(g,a,b),Object.defineProperty(c,e,f)}}function f(a=0,b={}){return(c,e,f)=>{if(!f||"function"!=typeof f.value)throw Error("debounce can only decorate functions");let g=f.value;f.value=(0,d.D)(g,a,b),Object.defineProperty(c,e,f)}}},46263(a,b,c){function d(a,b=0,{start:c=!0,middle:d=!0,once:e=!1}={}){let f=0,g,h=!1;function i(...j){if(h)return;let k=Date.now()-f;f=Date.now(),c?(c=!1,a.apply(this,j),e&&i.cancel()):(d&&k<b||!d)&&(clearTimeout(g),g=setTimeout(()=>{f=Date.now(),a.apply(this,j),e&&i.cancel()},d?b-k:b))}return i.cancel=()=>{clearTimeout(g),h=!0},i}function e(a,b=0,{start:c=!1,middle:e=!1,once:f=!1}={}){return d(a,b,{start:c,middle:e,once:f})}c.d(b,{D:()=>e,P:()=>d})},86702(a,b,c){c.d(b,{Z:()=>d});class NoOpStorage{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}}function d(a,b={throwQuotaErrorsOnSet:!1},c=window){let d;try{d=c[a]}catch{d=new NoOpStorage}let{throwQuotaErrorsOnSet:e}=b;return{getItem:function(a){try{return d.getItem(a)}catch(b){return null}},setItem:function(a,b){try{d.setItem(a,b)}catch(c){if(e&&c.message.toLowerCase().includes("quota"))throw c}},removeItem:function(a){try{d.removeItem(a)}catch(b){}}}}},88285(a,b,c){c.r(b);var d,e=c(35803),f=c(86702),g=c(3447),h=function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g};let{getItem:i,setItem:j}=(0,f.Z)("localStorage"),k=((d=class FeatureCalloutElement1 extends HTMLElement{async connectedCallback(){this.bootstrapFromLocalStorage()||await this.bootstrapFromServer()}bootstrapFromLocalStorage(){let a=i(this.localStorageKey);return!!a&&(this.bootstrap(JSON.parse(a)),!0)}get localStorageKey(){return`${k.LocalStoragePrefix}:${this.featureName}`}async bootstrapFromServer(){try{let a=await fetch(this.queryPath,{method:"GET",headers:k.FetchHeaders}),b=await a.text();if(!a.ok)throw Error(`unexpected response status ${a.status}: '${b}'`);let c=JSON.parse(b);return this.bootstrap(c),c.dismissed&&j(this.localStorageKey,b),!0}catch(d){throw Error(`failed to get feature state from server: ${d}`)}return!1}bootstrap(a){if(!("dismissed"in a)||null===a.dismissed)throw Error(`malformed response, likely no notice configured: '${JSON.stringify(a)}'`);!a.dismissed&&(this.applyTargetDefaults(),this.showCallout(),this.dismisser.addEventListener(this.dismissEvent,this.handleDismissal.bind(this),{once:!0}),this.detectAndBindToTabContainer())}detectAndBindToTabContainer(){let a=this.querySelector("tab-container");a&&a.addEventListener("tab-container-changed",a=>{let b=a;b.detail&&b.detail.relatedTarget&&b.detail.relatedTarget.getAttribute("aria-labelledby")===this.dismisser.id&&this.handleDismissal()})}applyTargetDefaults(){if(!this.firstElementChild||this.labelee&&this.dismisser)return;let a=this.firstElementChild.getAttribute("data-target")||"";this.labelee||(a=a.concat(" feature-callout.labelee")),this.dismisser||(a=a.concat(" feature-callout.dismisser")),this.firstElementChild.setAttribute("data-target",a)}handleDismissal(){this.submitForm(),j(this.localStorageKey,'{"dismissed":true}')}showCallout(){this.labelee.classList.add(this.labelClass)}async submitForm(){let a=this.dismissalForm;if(a)try{let b=await fetch(a.action,{method:a.method,body:new FormData(a),headers:k.FetchHeaders});if(!b.ok)throw Error(`unexpected response status ${b.status}: ${await b.text()}`)}catch(c){throw Error(`failed to persist dismissal to server: ${c}`)}}constructor(...a){super(...a),this.dismissEvent="click",this.labelClass="new-feature-label"}}).LocalStoragePrefix="feature-callout",d.FetchHeaders={"X-Requested-With":"XMLHttpRequest"},d);h([e.fA],k.prototype,"labelee",void 0),h([e.fA],k.prototype,"dismisser",void 0),h([e.fA],k.prototype,"dismissalForm",void 0),h([e.Lj],k.prototype,"queryPath",void 0),h([e.Lj],k.prototype,"featureName",void 0),h([e.Lj],k.prototype,"dismissEvent",void 0),h([e.Lj],k.prototype,"labelClass",void 0),h([(0,g.P)(1,{once:!0})],k.prototype,"handleDismissal",null),k=h([e.Ih],k)},35803(a,b,c){c.d(b,{Lj:()=>o,Ih:()=>v,fA:()=>t,GO:()=>u});let d=new WeakSet;function e(a){h(a),g(a)}let f=new WeakMap;function g(a=document){if(f.has(a))return f.get(a);let b=!1,c=new MutationObserver(a=>{for(let b of a)if("attributes"===b.type&&b.target instanceof Element)k(b.target);else if("childList"===b.type&&b.addedNodes.length)for(let c of b.addedNodes)c instanceof Element&&h(c)});c.observe(a,{childList:!0,subtree:!0,attributeFilter:["data-action"]});let d={get closed(){return b},unsubscribe(){b=!0,f.delete(a),c.disconnect()}};return f.set(a,d),d}function h(a){for(let b of a.querySelectorAll("[data-action]"))k(b);a instanceof Element&&a.hasAttribute("data-action")&&k(a)}function i(a){let b=a.currentTarget;for(let c of j(b))if(a.type===c.type){let e=b.closest(c.tag);d.has(e)&&"function"==typeof e[c.method]&&e[c.method](a);let f=b.getRootNode();if(f instanceof ShadowRoot&&d.has(f.host)&&f.host.matches(c.tag)){let g=f.host;"function"==typeof g[c.method]&&g[c.method](a)}}}function*j(a){for(let b of(a.getAttribute("data-action")||"").trim().split(/\s+/)){let c=b.lastIndexOf(":"),d=Math.max(0,b.lastIndexOf("#"))||b.length;yield{type:b.slice(0,c),tag:b.slice(c+1,d),method:b.slice(d+1)||"handleEvent"}}}function k(a){for(let b of j(a))a.addEventListener(b.type,i)}let l=a=>String("symbol"==typeof a?a.description:a).replace(/([A-Z]($|[a-z]))/g,"-$1").replace(/--/g,"-").replace(/^-|-$/,"").toLowerCase(),m=(a,b="property")=>{let c=l(a);if(!c.includes("-"))throw new DOMException(`${b}: ${String(a)} is not a valid ${b} name`,"SyntaxError");return c},n="attr";function o(a,b){s(a,n).add(b)}let p=new WeakSet;function q(a,b){if(p.has(a))return;p.add(a);let c=Object.getPrototypeOf(a),d=c?.constructor?.attrPrefix??"data-";for(let e of(b||(b=s(c,n)),b)){let f=a[e],g=m(`${d}${e}`),h={configurable:!0,get(){return this.getAttribute(g)||""},set(a){this.setAttribute(g,a||"")}};"number"==typeof f?h={configurable:!0,get(){return Number(this.getAttribute(g)||0)},set(a){this.setAttribute(g,a)}}:"boolean"==typeof f&&(h={configurable:!0,get(){return this.hasAttribute(g)},set(a){this.toggleAttribute(g,a)}}),Object.defineProperty(a,e,h),e in a&&!a.hasAttribute(g)&&h.set.call(a,f)}}let r=Symbol.for("catalyst");class CatalystDelegate{constructor(a){let b=this,c=a.prototype.connectedCallback;a.prototype.connectedCallback=function(){b.connectedCallback(this,c)};let d=a.prototype.disconnectedCallback;a.prototype.disconnectedCallback=function(){b.disconnectedCallback(this,d)};let e=a.prototype.attributeChangedCallback;a.prototype.attributeChangedCallback=function(a,c,d){b.attributeChangedCallback(this,a,c,d,e)};let f=a.observedAttributes||[];Object.defineProperty(a,"observedAttributes",{configurable:!0,get(){return b.observedAttributes(this,f)},set(a){f=a}}),function(a){let b=a.observedAttributes||[],c=a.attrPrefix??"data-",d=a=>m(`${c}${a}`);Object.defineProperty(a,"observedAttributes",{configurable:!0,get:()=>[...s(a.prototype,n)].map(d).concat(b),set(a){b=a}})}(a),function(a){let b=l(a.name).replace(/-element$/,"");try{window.customElements.define(b,a),window[a.name]=customElements.get(b)}catch(c){if(!(c instanceof DOMException&&"NotSupportedError"===c.name))throw c}}(a)}observedAttributes(a,b){return b}connectedCallback(a,b){var c;a.toggleAttribute("data-catalyst",!0),customElements.upgrade(a),function(a){for(let b of a.querySelectorAll("template[data-shadowroot]"))b.parentElement===a&&a.attachShadow({mode:"closed"===b.getAttribute("data-shadowroot")?"closed":"open"}).append(b.content.cloneNode(!0))}(a),q(a),c=a,d.add(c),c.shadowRoot&&e(c.shadowRoot),h(c),g(c.ownerDocument),b?.call(a),a.shadowRoot&&e(a.shadowRoot)}disconnectedCallback(a,b){b?.call(a)}attributeChangedCallback(a,b,c,d,e){q(a),"data-catalyst"!==b&&e&&e.call(a,b,c,d)}}function s(a,b){if(!Object.prototype.hasOwnProperty.call(a,r)){let c=a[r],d=a[r]=new Map;if(c)for(let[e,f]of c)d.set(e,new Set(f))}let g=a[r];return g.has(b)||g.set(b,new Set),g.get(b)}function t(a,b){s(a,"target").add(b),Object.defineProperty(a,b,{configurable:!0,get(){return function(a,b){let c=a.tagName.toLowerCase();if(a.shadowRoot){for(let d of a.shadowRoot.querySelectorAll(`[data-target~="${c}.${b}"]`))if(!d.closest(c))return d}for(let e of a.querySelectorAll(`[data-target~="${c}.${b}"]`))if(e.closest(c)===a)return e}(this,b)}})}function u(a,b){s(a,"targets").add(b),Object.defineProperty(a,b,{configurable:!0,get(){return function(a,b){let c=a.tagName.toLowerCase(),d=[];if(a.shadowRoot)for(let e of a.shadowRoot.querySelectorAll(`[data-targets~="${c}.${b}"]`))e.closest(c)||d.push(e);for(let f of a.querySelectorAll(`[data-targets~="${c}.${b}"]`))f.closest(c)===a&&d.push(f);return d}(this,b)}})}function v(a){new CatalystDelegate(a)}}}])
//# sourceMappingURL=app_components_github_feature-callout-element_ts-9d45ff476f8e.js.map